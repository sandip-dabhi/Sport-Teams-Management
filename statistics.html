<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Statistics - Sports TeamZone</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      min-height: 100vh;
      font-family: 'Inter', sans-serif;
      color: #fff;
      background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/7af33ffa-5e16-4e03-bfb0-6398ffa99f77.png') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      flex-direction: column;
    }
    header {
      position: sticky;
      top: 0;
      background: rgba(255 255 255 / 0.15);
      backdrop-filter: saturate(180%) blur(16px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.25);
      padding: 1rem 2rem;
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      display: flex;
      align-items: center;
      font-weight: 800;
      font-size: 1.8rem;
      color: #ffffffcc;
      user-select: none;
    }
    .logo img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      border-radius: 8px;
      object-fit: cover;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    nav {
      display: flex;
      gap: 1.8rem;
    }
    nav a {
      color: #e4e9f0cc;
      font-weight: 600;
      font-size: 1rem;
      text-decoration: none;
      padding: 8px 15px;
      border-radius: 12px;
      transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
    }
    nav a:hover,
    nav a:focus {
      background-color: rgba(255 255 255 / 0.35);
      color: #fff;
      outline: none;
      cursor: pointer;
      transform: translateY(-2px);
    }
    main {
      flex: 1;
      max-width: 1000px;
      margin: 3.5rem auto 4.5rem;
      padding: 3.5rem 4.5rem;
      background: rgba(0,0,0,0.5);
      border-radius: 20px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.7);
      color: #e0eaff;
      line-height: 1.8;
      display: flex;
      flex-direction: column;
      gap: 40px;
    }
    h1 {
      font-weight: 900;
      font-size: 3.2rem;
      line-height: 1.2;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
      letter-spacing: -0.03em;
    }
    .page-description {
      font-size: 1.15rem;
      padding: 0 1rem;
      max-width: 800px;
      margin: 0 auto 2rem;
      text-align: center;
      color: #dce6ff;
    }
    h2 {
      font-weight: 700;
      font-size: 2.2rem;
      color: #a0cfff;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid #66a6ff;
      padding-bottom: 0.5rem;
      letter-spacing: -0.02em;
      text-align: center;
    }
    .statistics-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2.5rem;
        justify-content: center;
        width: 100%;
    }
    .statistic-card {
        background: rgba(255, 255, 255 / 0.15);
        backdrop-filter: saturate(180%) blur(12px);
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: 0 6px 30px rgba(0,0,0,0.45);
        border: 1px solid rgba(255,255,255,0.08);
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .statistic-card h3 {
        font-size: 1.6rem;
        color: #89f7fe;
        margin-bottom: 1rem;
        font-weight: 700;
    }
    .statistic-card p {
        font-size: 2.8rem;
        font-weight: 900;
        color: #fff;
        background: -webkit-linear-gradient(135deg, #a0cfff 0%, #66a6ff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        line-height: 1;
    }
    .statistic-card p.small-text {
        font-size: 1.1rem;
        font-weight: 500;
        color: #dce6ff;
        -webkit-text-fill-color: #dce6ff;
        background: none;
        margin-top: 0.5rem;
        word-break: break-word;
    }
    .team-breakdown {
        background: rgba(255, 255, 255 / 0.15);
        backdrop-filter: saturate(180%) blur(12px);
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: 0 6px 30px rgba(0,0,0,0.45);
        border: 1px solid rgba(255,255,255,0.08);
        width: 100%;
        max-width: 700px;
        margin: 0 auto;
    }
    .team-breakdown ul {
        list-style: none;
        padding: 0;
    }
    .team-breakdown li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.8rem 0;
        border-bottom: 1px dashed rgba(255,255,255,0.2);
        font-size: 1.1rem;
    }
    .team-breakdown li:last-child {
        border-bottom: none;
    }
    .team-breakdown li strong {
        color: #a0cfff;
    }
    .team-breakdown li span {
        font-weight: 600;
        color: #89f7fe;
    }

    footer {
      text-align: center;
      padding: 2rem 2rem;
      font-size: 0.9rem;
      color: #ffffffaa;
      user-select: none;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: saturate(180%) blur(10px);
    }
    @media (max-width: 768px) {
      header {
        flex-direction: column;
        padding: 1rem 1rem;
      }
      nav {
        margin-top: 1rem;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
      }
      main {
        margin: 2rem auto;
        padding: 2rem 2.5rem;
        gap: 30px;
      }
      h1 {
        font-size: 2.5rem;
      }
      .page-description {
        font-size: 1rem;
        padding: 0;
      }
      h2 {
        font-size: 1.8rem;
      }
      .statistics-container {
        grid-template-columns: 1fr;
      }
      .statistic-card {
        padding: 2rem;
      }
      .statistic-card h3 {
        font-size: 1.5rem;
      }
      .statistic-card p {
        font-size: 2.2rem;
      }
      .team-breakdown {
        padding: 2rem;
      }
      .team-breakdown li {
        font-size: 1rem;
        padding: 0.6rem 0;
      }
    }
    @media (max-width: 480px) {
        main {
            padding: 1.5rem;
        }
        h1 {
            font-size: 2rem;
        }
        h2 {
            font-size: 1.5rem;
        }
        nav a {
            padding: 6px 10px;
            font-size: 0.9rem;
        }
        .logo {
            font-size: 1.5rem;
        }
        .logo img {
            width: 30px;
            height: 30px;
        }
        .statistic-card {
            padding: 1.5rem;
        }
        .statistic-card h3 {
            font-size: 1.3rem;
        }
        .statistic-card p {
            font-size: 1.8rem;
        }
        .statistic-card p.small-text {
            font-size: 0.9rem;
        }
        .team-breakdown {
            padding: 1.5rem;
        }
    }
  </style>
</head>
<body>

<header>
  <div class="logo" aria-label="Sports Team Management Logo">
    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/c0dff07e-e62e-4701-b107-39c333adec8c.png" alt="Sports TeamZone Logo" />
    Sports TeamZone
  </div>
  <nav aria-label="Primary navigation">
    <a href="home.html" tabindex="0">Home</a>
    <a href="teamscheduler.html" tabindex="0">Team Scheduler</a>
    <a href="teamlist.html" tabindex="0">Team List</a>
    <a href="statistics.html" tabindex="0">Statistics</a>
    <a href="contact.html" tabindex="0">Contact</a>
    <a href="login.html"tabindex="0">Login</a>
    <a href="register.html"tabindex="0">Register</a>
  </nav>
</header>

<main>
  <h1>Your Sports Team Statistics</h1>
  <p class="page-description">Get insights into your managed teams, including total teams, breakdown by sport, and more. Data is dynamically loaded from your team management efforts.</p>

  <section class="statistics-section" aria-label="Team Statistics Overview">
    <h2>Overall Team Stats</h2>
    <div class="statistics-container">
      <div class="statistic-card" aria-labelledby="total-teams-heading">
        <h3 id="total-teams-heading">Total Teams Managed</h3>
        <p id="totalTeamsCount">0</p>
      </div>
      <div class="statistic-card" aria-labelledby="unique-sports-heading">
        <h3 id="unique-sports-heading">Unique Sports</h3>
        <p id="uniqueSportsCount">0</p>
      </div>
      <div class="statistic-card" aria-labelledby="teams-with-coach-heading">
        <h3 id="teams-with-coach-heading">Teams with Coach</h3>
        <p id="teamsWithCoachCount">0</p>
      </div>
      <div class="statistic-card" aria-labelledby="avg-motto-length-heading">
        <h3 id="avg-motto-length-heading">Avg. Motto Length</h3>
        <p id="avgMottoLength">0</p>
      </div>
      <div class="statistic-card" aria-labelledby="shortest-motto-heading">
        <h3 id="shortest-motto-heading">Shortest Motto</h3>
        <p id="shortestMottoLength">N/A</p>
        <p class="small-text" id="shortestMottoText"></p>
      </div>
      <div class="statistic-card" aria-labelledby="longest-motto-heading">
        <h3 id="longest-motto-heading">Longest Motto</h3>
        <p id="longestMottoLength">N/A</p>
        <p class="small-text" id="longestMottoText"></p>
      </div>
      <div class="statistic-card" aria-labelledby="teams-no-motto-heading">
        <h3 id="teams-no-motto-heading">Teams with No Motto</h3>
        <p id="teamsNoMottoCount">0</p>
      </div>
      <div class="statistic-card" aria-labelledby="unique-coaches-heading">
        <h3 id="unique-coaches-heading">Total Unique Coaches</h3>
        <p id="uniqueCoachesCount">0</p>
      </div>
      <div class="statistic-card" aria-labelledby="avg-team-name-length-heading">
        <h3 id="avg-team-name-length-heading">Avg. Team Name Length</h3>
        <p id="avgTeamNameLength">0</p>
      </div>
    </div>
  </section>

  <section class="statistics-section" aria-label="Team Breakdown by Sport">
    <h2>Teams Breakdown by Sport</h2>
    <div class="team-breakdown">
      <ul id="sportBreakdownList">
        <li id="noTeamsMessage">No teams added yet.</li>
      </ul>
    </div>
  </section>

</main>

<footer>
  &copy; 2024 Sports TeamZone. All rights reserved.
</footer>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    loadStatistics();
  });

  function loadStatistics() {
    const teams = JSON.parse(localStorage.getItem('teams')) || [];

    const totalTeamsCountElement = document.getElementById('totalTeamsCount');
    totalTeamsCountElement.textContent = teams.length;

    const sportCounts = {};
    let teamsWithCoachCount = 0;
    let teamsNoMottoCount = 0;
    let totalMottoLength = 0;
    let mottoCount = 0;
    let shortestMotto = { text: 'N/A', length: Infinity };
    let longestMotto = { text: 'N/A', length: -1 };
    const uniqueCoaches = new Set();
    let totalTeamNameLength = 0;


    teams.forEach(team => {
      sportCounts[team.sport] = (sportCounts[team.sport] || 0) + 1;

      if (team.coach && team.coach !== 'N/A' && team.coach.trim() !== '') {
        teamsWithCoachCount++;
        uniqueCoaches.add(team.coach.trim().toLowerCase());
      }

      if (team.motto && team.motto !== 'N/A' && team.motto.trim() !== '') {
        const currentMottoLength = team.motto.length;
        totalMottoLength += currentMottoLength;
        mottoCount++;

        if (currentMottoLength < shortestMotto.length) {
          shortestMotto = { text: team.motto, length: currentMottoLength };
        }
        if (currentMottoLength > longestMotto.length) {
          longestMotto = { text: team.motto, length: currentMottoLength };
        }
      } else {
          teamsNoMottoCount++;
      }

      if (team.name && team.name.trim() !== '') {
        totalTeamNameLength += team.name.length;
      }
    });

    const uniqueSportsCountElement = document.getElementById('uniqueSportsCount');
    uniqueSportsCountElement.textContent = Object.keys(sportCounts).length;

    const teamsWithCoachCountElement = document.getElementById('teamsWithCoachCount');
    teamsWithCoachCountElement.textContent = teamsWithCoachCount;

    const avgMottoLengthElement = document.getElementById('avgMottoLength');
    avgMottoLengthElement.textContent = mottoCount > 0 ? (totalMottoLength / mottoCount).toFixed(1) : '0';

    const shortestMottoLengthElement = document.getElementById('shortestMottoLength');
    const shortestMottoTextElement = document.getElementById('shortestMottoText');
    if (shortestMotto.length !== Infinity) {
        shortestMottoLengthElement.textContent = shortestMotto.length;
        shortestMottoTextElement.textContent = `"${shortestMotto.text}"`;
    } else {
        shortestMottoLengthElement.textContent = 'N/A';
        shortestMottoTextElement.textContent = '';
    }

    const longestMottoLengthElement = document.getElementById('longestMottoLength');
    const longestMottoTextElement = document.getElementById('longestMottoText');
    if (longestMotto.length !== -1) {
        longestMottoLengthElement.textContent = longestMotto.length;
        longestMottoTextElement.textContent = `"${longestMotto.text}"`;
    } else {
        longestMottoLengthElement.textContent = 'N/A';
        longestMottoTextElement.textContent = '';
    }

    const teamsNoMottoCountElement = document.getElementById('teamsNoMottoCount');
    teamsNoMottoCountElement.textContent = teamsNoMottoCount;

    const uniqueCoachesCountElement = document.getElementById('uniqueCoachesCount');
    uniqueCoachesCountElement.textContent = uniqueCoaches.size;

    const avgTeamNameLengthElement = document.getElementById('avgTeamNameLength');
    avgTeamNameLengthElement.textContent = teams.length > 0 ? (totalTeamNameLength / teams.length).toFixed(1) : '0';


    const sportBreakdownList = document.getElementById('sportBreakdownList');
    sportBreakdownList.innerHTML = '';

    if (teams.length === 0) {
        sportBreakdownList.innerHTML = '<li id="noTeamsMessage">No teams added yet.</li>';
    } else {
        const sortedSports = Object.keys(sportCounts).sort();
        sortedSports.forEach(sport => {
            const listItem = document.createElement('li');
            listItem.innerHTML = `<strong>${sport}:</strong> <span>${sportCounts[sport]} Team(s)</span>`;
            sportBreakdownList.appendChild(listItem);
        });
    }
  }
</script>

</body>
</html>
